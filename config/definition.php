<?php

declare(strict_types=1);

use Symfony\Component\Config\Definition\Configurator\DefinitionConfigurator;

return static function (DefinitionConfigurator $definition) {
    $definition->rootNode()
        ->children()
            ->booleanNode('authentication')
                ->defaultTrue()
            ->end()
        ->end()
        ->children()
            ->arrayNode('cache')
                ->children()
                    ->booleanNode('active')
                        ->defaultFalse()
                    ->end()
                    ->scalarNode('adapter')
                        ->defaultValue('cache.app')
                        ->cannotBeEmpty()
                    ->end()
                    ->integerNode('expiry')
                        ->defaultValue(7200)
                    ->end()
                ->end()
                ->addDefaultsIfNotSet()
            ->end()
        ->end()
        ->children()
            ->arrayNode('download')
                ->children()
                    ->scalarNode('directory')
                        ->defaultNull()
                        ->cannotBeEmpty()
                    ->end()
                ->end()
                ->addDefaultsIfNotSet()
            ->end()
        ->end()
        ->children()
            ->arrayNode('chart')
                ->children()
                    ->scalarNode('command')
                        ->defaultNull()
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('directory')
                        ->defaultNull()
                        ->cannotBeEmpty()
                    ->end()
                ->end()
                ->addDefaultsIfNotSet()
            ->end()
        ->end()
        ->children()
            ->scalarNode('directory')
                ->isRequired()
                ->cannotBeEmpty()
            ->end()
        ->end()
        ->children()
            ->arrayNode('mail')
                ->children()
                    ->scalarNode('fromEmail')
                        ->isRequired()
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('fromName')
                        ->isRequired()
                        ->cannotBeEmpty()
                    ->end()
                ->end()
                ->isRequired()
            ->end()
        ->end()
        ->children()
            ->arrayNode('request')
                ->children()
                    ->scalarNode('dayParameter')
                        ->defaultValue('Today')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('dayStartParameter')
                        ->defaultValue('8 days ago')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('dayEndParameter')
                        ->defaultValue('1 day ago')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('monthParameter')
                        ->defaultValue('First day of this month')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('monthStartParameter')
                        ->defaultValue('First day of 12 months ago')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('monthEndParameter')
                        ->defaultValue('Last day of last month')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('weekParameter')
                        ->defaultValue('Monday This Week')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('weekStartParameter')
                        ->defaultValue('First Monday of 52 Weeks Ago')
                        ->cannotBeEmpty()
                    ->end()
                    ->scalarNode('weekEndParameter')
                        ->defaultValue('First Sunday of Last Week')
                        ->cannotBeEmpty()
                    ->end()
                    ->integerNode('limitFilter')
                        ->defaultValue(25)
                        ->min(1)
                    ->end()
                    ->integerNode('offsetFilter')
                        ->defaultValue(0)
                        ->min(0)
                    ->end()
                ->end()
                ->addDefaultsIfNotSet()
            ->end()
        ->end()
        ->children()
            ->arrayNode('user')
                ->children()
                    ->scalarNode('class')
                        ->isRequired()
                        ->cannotBeEmpty()
                    ->end()
                ->end()
                ->isRequired()
            ->end()
        ->end()
        ->children()
            ->arrayNode('view')
                ->children()
                    ->arrayNode('exclude')
                        ->scalarPrototype()
                        ->end()
                    ->end()
                ->end()
                ->addDefaultsIfNotSet()
            ->end()
        ->end();
};
